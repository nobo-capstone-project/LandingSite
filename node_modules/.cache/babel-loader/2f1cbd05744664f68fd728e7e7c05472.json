{"ast":null,"code":"import _classCallCheck from \"/Users/leocai/Study/INFO_Capstone/easy-parking-seattle/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/leocai/Study/INFO_Capstone/easy-parking-seattle/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/leocai/Study/INFO_Capstone/easy-parking-seattle/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/leocai/Study/INFO_Capstone/easy-parking-seattle/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/leocai/Study/INFO_Capstone/easy-parking-seattle/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/leocai/Study/INFO_Capstone/easy-parking-seattle/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/leocai/Study/INFO_Capstone/easy-parking-seattle/src/PopupText.js\";\nimport React, { Component } from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/database';\n\nvar PopupText =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PopupText, _Component);\n\n  function PopupText(props) {\n    var _this;\n\n    _classCallCheck(this, PopupText);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PopupText).call(this, props));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      key: \"\",\n      comments: null,\n      comment: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(PopupText, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var pkey = this.props.info.attributes.OBJECTID;\n      console.log(pkey);\n      this.commentsRef = firebase.database().ref('comments').child(pkey);\n      this.commentsRef.on('value', function (snapshot) {\n        var values = snapshot.val();\n        console.log(values);\n\n        if (values != null) {\n          _this2.setState({\n            comments: Object.values(values)\n          });\n        } else {\n          _this2.setState({\n            comments: null\n          });\n        }\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this3 = this;\n\n      if (this.props.info !== prevProps.info) {\n        var pkey = this.props.info.attributes.OBJECTID;\n        this.commentsRef = firebase.database().ref('comments').child(pkey);\n        this.commentsRef.on('value', function (snapshot) {\n          var values = snapshot.val();\n\n          if (values != null) {\n            _this3.setState({\n              comments: Object.values(values)\n            });\n          } else {\n            _this3.setState({\n              comments: null\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      this.setState({\n        comment: e.target.value\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      // let values = this.state.comments;\n      // let update = [...values, this.state.comment];\n      // console.log(update);\n      // this.setState({\n      //     comments: update\n      // });\n      var value = this.props.user + \": \" + this.state.comment;\n      this.commentsRef.push(value).catch(function (d) {\n        return console.log(\"error\", d);\n      });\n      e.preventDefault();\n      e.target.reset();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      console.log(this.state.comments);\n      var key = 1;\n      return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, \"Type:\"), \" Street Parking\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"Location:\"), \" \", this.props.info.attributes.UNITDESC), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, \"Paid Parking Hours and Rates:\"), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"Monday - Friday: \", this.props.info.attributes.START_TIME_WKD, \" to \", this.props.info.attributes.END_TIME_WKD), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \"Morning: $\", this.props.info.attributes.WKD_RATE1, \" / hr\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"Afternoon: $\", this.props.info.attributes.WKD_RATE2, \" / hr\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"Evening: $\", this.props.info.attributes.WKD_RATE3, \" / hr\"))), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Saturday: \", this.props.info.attributes.START_TIME_SAT, \" to \", this.props.info.attributes.END_TIME_SAT), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, \"Morning: $\", this.props.info.attributes.SAT_RATE1, \" / hr\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, \"Afternoon: $\", this.props.info.attributes.SAT_RATE2, \" / hr\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"Evening: $\", this.props.info.attributes.SAT_RATE3, \" / hr\"))), React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Comment:\", React.createElement(\"input\", {\n        type: \"text\",\n        name: \"comment\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Comments\"), React.createElement(\"ul\", {\n        className: \"list-unstyled\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, function () {\n        if (_this4.state.comments != null) {\n          return _this4.state.comments.map(function (c) {\n            return React.createElement(\"li\", {\n              key: key = key + 1,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 115\n              },\n              __self: this\n            }, c);\n          });\n        } else {\n          return React.createElement(\"li\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 119\n            },\n            __self: this\n          }, \"Null\");\n        }\n      }()))));\n    }\n  }]);\n\n  return PopupText;\n}(Component);\n\nexport default PopupText;","map":{"version":3,"sources":["/Users/leocai/Study/INFO_Capstone/easy-parking-seattle/src/PopupText.js"],"names":["React","Component","firebase","PopupText","props","handleSubmit","bind","handleChange","state","key","comments","comment","pkey","info","attributes","OBJECTID","console","log","commentsRef","database","ref","child","on","snapshot","values","val","setState","Object","prevProps","e","target","value","user","push","catch","d","preventDefault","reset","UNITDESC","START_TIME_WKD","END_TIME_WKD","WKD_RATE1","WKD_RATE2","WKD_RATE3","START_TIME_SAT","END_TIME_SAT","SAT_RATE1","SAT_RATE2","SAT_RATE3","map","c"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport firebase from 'firebase/app';\nimport 'firebase/database';\n\nclass PopupText extends Component {\n    constructor(props) {\n        super(props);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.state = {\n            key: \"\",\n            comments: null,\n            comment: \"\"\n        };\n    }\n\n    componentDidMount() {\n        let pkey = this.props.info.attributes.OBJECTID;\n        console.log(pkey);\n        this.commentsRef = firebase.database().ref('comments').child(pkey);\n\n        this.commentsRef.on('value', (snapshot) => {\n            let values = snapshot.val();\n\n            console.log(values);\n            if (values != null) {\n                this.setState({\n                    comments: Object.values(values)\n                });\n            } else {\n                this.setState({\n                    comments: null\n                });\n            }\n        });\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.info !== prevProps.info) {\n            let pkey = this.props.info.attributes.OBJECTID;\n            this.commentsRef = firebase.database().ref('comments').child(pkey);\n\n            this.commentsRef.on('value', (snapshot) => {\n                let values = snapshot.val();\n                if (values != null) {\n                    this.setState({\n                        comments: Object.values(values)\n                    });\n                } else {\n                    this.setState({\n                        comments: null\n                    });\n                }\n            });\n        }\n    }\n\n    handleChange(e) {\n        this.setState({ comment: e.target.value });\n    }\n\n    handleSubmit(e) {\n        // let values = this.state.comments;\n        // let update = [...values, this.state.comment];\n        // console.log(update);\n        // this.setState({\n        //     comments: update\n        // });\n        let value = this.props.user + \": \" + this.state.comment;\n        this.commentsRef.push(value).catch((d) => console.log(\"error\", d));\n        e.preventDefault();\n        e.target.reset();\n    }\n\n    render() {\n        console.log(this.state.comments);\n        let key = 1;\n        return (\n            <>\n                <div><b>Type:</b> Street Parking</div>\n                <div><b>Location:</b> {this.props.info.attributes.UNITDESC}</div>\n                <div><b>Paid Parking Hours and Rates:</b>\n                    <ul>\n                        <li>Monday - Friday: {this.props.info.attributes.START_TIME_WKD} to {this.props.info.attributes.END_TIME_WKD}</li>\n                        <ul>\n                            <li>Morning: ${this.props.info.attributes.WKD_RATE1} / hr</li>\n                            <li>Afternoon: ${this.props.info.attributes.WKD_RATE2} / hr</li>\n                            <li>Evening: ${this.props.info.attributes.WKD_RATE3} / hr</li>\n                        </ul>\n                    </ul>\n                    <ul>\n                        <li>Saturday: {this.props.info.attributes.START_TIME_SAT} to {this.props.info.attributes.END_TIME_SAT}</li>\n                        <ul>\n                            <li>Morning: ${this.props.info.attributes.SAT_RATE1} / hr</li>\n                            <li>Afternoon: ${this.props.info.attributes.SAT_RATE2} / hr</li>\n                            <li>Evening: ${this.props.info.attributes.SAT_RATE3} / hr</li>\n                        </ul>\n                    </ul>\n                    <form onSubmit={this.handleSubmit}>\n                        <label>Comment:\n                            <input type=\"text\"\n                                name=\"comment\"\n                                onChange={this.handleChange}\n                            />\n                        </label>\n                        <input type=\"submit\" value=\"Submit\" />\n                    </form>\n                    <div>Comments</div>\n                    <ul className=\"list-unstyled\">\n\n                        <div>\n                            {(() => {\n                                if (this.state.comments != null) {\n                                    return (\n                                        this.state.comments.map(c => <li key={key = key + 1}>{c}</li>)\n                                    )\n                                } else {\n                                    return (\n                                        <li>Null</li>\n                                    )\n                                }\n                            })()}\n                        </div>\n\n                    </ul>\n                </div>\n            </>\n        );\n    }\n}\n\nexport default PopupText;"]},"metadata":{},"sourceType":"module"}